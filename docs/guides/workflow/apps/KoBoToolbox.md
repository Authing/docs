


 KoBo工具箱
 [#](#kobo工具箱 "永久链接")
===================================================



[KoBo工具箱](https://www.kobotoolbox.org/) 
 是一种现场调查和数据收集工具，可轻松设计可从移动设备离线完成的交互式表单。它既可以作为免费云解决方案，也可以作为自托管版本。
 




 资格证书
 



 您可以找到此节点的身份验证信息
 [此处]（/integrations/builtin/credential/kobotoolbox/）
 .
 




 操作
 [#](#操作 "永久链接")
-----------------------------------------------


*文件
	+创建
	+删除
	+获取
	+获取多个
*表单
	+获取
	+获取多个
		-重新部署
*吊钩
	+获取
	+获取多个
	+日志
	+全部重试
	+重试一次
*提交
	+删除
	+获取
	+获取多个
	+获取验证状态
	+更新验证状态



 选项
 [#](#选项 "永久链接")
-----------------------------------------


### 
 查询选项
 [#](#查询选项 "永久链接")



 查询提交操作支持查询选项：
 


*在
 **参数**
 面板：
	+**开始**
	 控制开始查询的索引偏移量（使用API分页逻辑）。
	+**限制**
	 设置要返回的最大记录数。请注意，无论您提供的值是多少，API总是有3..0000条返回记录的限制。
*在
 **查询选项**
 部分，您可以激活以下参数：
	+**查询**
	 允许您以MongoDB的JSON查询格式指定过滤器谓词。例如：
	 `{“status”：“success”，“_submission_time”：{“$lt”：“2..021..-11-01T01:02:03”}}`
	 查询值为的所有提交
	 `成功`
	 用于现场
	 `状态`
	 ，并于2021 11月1日01:02:03前提交。
	+**字段**
	 允许您指定要获取的字段列表，以使响应更轻。
	+**排序**
	 允许您提供MongoDB JSON格式的排序标准列表。例如
	 `｛“status”：1，“_submission_time”：-1｝`
	 按升序状态和降序提交时间指定排序顺序。



 有关这些选项的详细信息，请参阅
 [Formhub API文档](https://github.com/SEL-Columbia/formhub/wiki/Formhub-Access-Points-（API）#API参数）



### 
 提交选项
 [#](#提交选项 "永久链接")



 所有返回表单提交数据的操作都提供了调整响应的选项。其中包括：
 


*下载选项允许您下载链接到每个特定表单提交的任何附件，如图片和视频。它还允许您选择命名模式和要下载的文件大小（如果可用-通常用于图像）。
*格式化选项执行某些重新格式化，如中所述
 [关于重新格式化]（#关于重新格式化）
 .


#### 
 关于重新格式化
 [#](#关于重新格式化 "永久链接")



 KoBoToolbox提交数据的默认JSON格式有时很难处理，因为它不支持模式，因此所有字段都作为字符串返回。
 



 此节点提供了一个轻量级的有见解的重新格式化逻辑，通过
 **重新格式化？**
 参数，可用于返回表单提交的所有操作：提交查询、获取和附件下载操作。
 



 启用后，重新格式化：
 


*按照表单的组将JSON重新组织为多级层次结构。默认情况下，问题分组层次结构由
 `/` 
 例如，字段名中的字符
 `组1/问题1`
 。启用重新格式化后，n8..n将这些重新组织为
 `组1.问题1`
 ，作为嵌套的JSON对象。
*重命名要修剪的字段
 `_` 
 （许多下游系统不支持）。
*将所有地理空间字段（点、线和面积问题类型）解析为其标准GeoJSON等效项。
*拆分所有匹配
 **多选择掩码**
 通配符掩码到数组中。由于多选字段显示为空格分隔的字符串，因此无法从算法上猜测它们，因此必须提供字段命名掩码。将掩码设置为逗号分隔列表。列表支持
 `*` 
 通配符。
*转换所有与
 **数字掩码**
 通配符掩码转换为JSON浮点数。



 下面是JSON中的一个详细示例：
 





|  |  |
| --- | --- |
| 

```
 1
 2
 3
 4..
 5..
 6..
 7..
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
```

 | 

```
{
 “\_id”：471987，
 “formhub/uuid”：“189436bb09a54957bfcc798e338b54d6”，
 “开始”：“2021-12-05T16:13:38.527+02:00”，
 “结束”：“2021-12-05T16:15:33.407+02:00”，
 “字段\详细信息/字段\名称”：“测试字段”，
 “字段详细信息/字段位置”：“-1.932914 30.078211 1421 165”，
 “字段\详细信息/字段\形状”：“-1.932914 30.078211 1421 165；-1.933011 30.078085 0 0；-1.933257 30.078004 0 0；-1.0933338 30.078197 0 0；-0.933107 30.078299 0 0；-1992914 30.078211 142 1 165”，
 “田地/作物”：“玉米豆鳄梨”，
 “字段\详细信息/字段\大小\平方米”：“2300”，
 “版本”：“veGcULpqP6JNFKRJbbMvMs”，
 “meta/instanceID”：“uuid:2356cbe-c1fd-414d-85c8-84f33e92618a”，
 “\_xform\_id\_string”：“ajXVJpBkTD5tB4Nu9QXpgm”，
 “\uuid”：“2356cbbe-c1fd-414d-85c8-84f33e92618a”，
 “\附件”：[]，
 “\status”：“已提交”，
 “\地理位置”：[
 -1.932914,
 30.078211
 ],
 “提交时间”：“2021-12-05T14:15:44”，
 “\tags”：[]，
 “\n注释”：[]，
 “\_validation\_status”：｛｝，
 “提交”：空
}

```

 |




 在启用重新格式化以及用于多选和数字格式化的适当掩码（例如，
 `裁剪（_*）`
 和
 `*_平方米`
 n8n将其解析为：
 





|  |  |
| --- | --- |
| 

```
 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
```

 | 

```
{
 “id”：471987，
 “formhub”：{
 “uuid”：“189436bb09a54957bfcc798e338b54d6”
 },
 “开始”：“2021-12-05T16:13:38.527+02:00”，
 “结束”：“2021-12-05T16:15:33.407+02:00”，
 "Field\_Details": {
 "Field\_Name": "Test Fields",
 "Field\_Location": {
 "lat": -1.932914,
 "lon": 30.078211
 },
 "Field\_Shape": {
 "type": "polygon",
 "coordinates": [
 {
 "lat": -1.932914,
 "lon": 30.078211
 },
 {
 "lat": -1.933011,
 "lon": 30.078085
 },
 {
 "lat": -1.933257,
 "lon": 30.078004
 },
 {
 "lat": -1.933338,
 "lon": 30.078197
 },
 {
 "lat": -1.933107,
 "lon": 30.078299
 },
 {
 "lat": -1.932914,
 "lon": 30.078211
 }
 ]
 },
 "Crops\_Grown": [
 "maize",
 "beans",
 "avocado"
 ],
 "Field\_Size\_sqm": 2300
 },
 "version": "veGcULpqP6JNFKRJbbMvMs",
 "meta": {
 "instanceID": "uuid:2356cbbe-c1fd-414d-85c8-84f33e92618a"
 },
 "xform\_id\_string": "ajXVJpBkTD5tB4Nu9QXpgm",
 "uuid": "2356cbbe-c1fd-414d-85c8-84f33e92618a",
 "attachments": [],
 "status": "submitted\_via\_web",
 "geolocation": {
 "lat": -1.932914,
 "lon": 30.078211
 },
 "submission\_time": "2021-12-05T14:15:44",
 "tags": [],
 "notes": [],
 "validation\_status": {},
 "submitted\_by": null
}

```

 |





